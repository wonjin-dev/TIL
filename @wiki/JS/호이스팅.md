# 호이스팅

호이스팅에 대하여 mdn에서는 다음과 같이 정의하고 있다

```
JavaScript에서 호이스팅(hoisting)이란,
인터프리터가 변수와 함수의 메모리 공간을 선언 전에 미리 할당하는 것을 의미합니다.
var로 선언한 변수의 경우 호이스팅 시 undefined로 변수를 초기화합니다.
반면 let과 const로 선언한 변수의 경우 호이스팅 시 변수를 초기화하지 않습니다.
```

실제 경험에서 쉽게 표현하자면, `선언한 위치에 상관없이 선언 대상을 확인할 수 있다`
( 당연히 정확한 표현이 아니다 ! )

**_예시_**

```
hoist(); // log

function hoist () {
  console.log('log');
}

=======================

hoist(); // Err

var hoist = function () => {
  console.log('log');
}

```

즉, 선언부 이전에 함수, 변수에 대한 값을 사용할 수 있는 것이다

원리에 대해서는 우선 `자바스크립트`는 `코드를 실행하기 전에 따로 컴파일 과정을 거친다`는 것을 알아야 한다

컴파일 과정을 통해 자바스크립트는 실행 이전 모든 스코프나 실행 컨텍스트를 탐색하여, 각 스코프의 변수 객체에 여러 식별자를 수집한다

때문에 실행 시점전에 식별자에 대한 `정보를 이미 알고 있기 때문에 스코프의 어느 지점이든 관련된 함수/변수를 참조할 수 있다`

<br>

호이스팅은 크게 함수 호이스팅과 변수 호이스팅으로 나뉜다

- 선언된 함수는 상단에서 참조, 호출이 가능하다
- 선언된 `var` 는 상단에서 참조, 할당이 가능하다
- 선언된 `let` , `const` 는 상단에서 참조, 할당이 불가능하다

## 함수 호이스팅

함수 호이스팅은 다른 무엇보다 가장 먼저 이루어진다

함수 호이스팅은 선언문에만 해당한다. 따라서 식별자가 변수 객체에 수집될 때, 부가적으로 해당 함수 참조에 대한 초기화까지 자동으로 이루어진다<br>
그래서 선언된 함수는 상단에서 참조, 호출이 가능하다

## 변수 호이스팅

변수는 3가지 과정을 통해 할당된다

1. 선언 : 파싱 과정에서 변수 객체가 변수에 대한 식별자들을 수집한다<br>
2. 초기화 : 식별자에 메모리를 할당하고 undefined 상태를 부여한다<br>
3. 할당 : 변수 안에 직접 값을 넘겨 준다<br>

함수 호이스팅 과정에서 함수의 식별자를 선언하고 참조값을 초기화한 것처럼 변수 또한 마찬가지로 선언과 초기화를 해주어야만 값의 참조 및 할당이 가능하다. 다만 변수를 어떻게 선언했는지에 따라 선언, 초기화 시점이 달라질 수 있다는 점을 유의해야한다

### var

var 는 호이스팅이 발생하면, 선언과 초기화가 거의 동시에 이루어진다

실행 시점의 스코프 최상단에서 해당 변수에 대한 메모리가 살아있기 때문에 선언부 위치에 상관 없이 참조, 할당이 가능하다

### let, const

let , const 는 호이스팅이 발생하면, 선언만 이루어지고 실행 시점에서 실질적인 선언부를 만날 때까지 초기화는 이루어지지 않는다

실행 전까지 해당 변수에 대한 메모리는 존재하지 않기 때문에 선언부 상단에서 참조, 할당이 불가능하다

<br>

## 결론

`var` 대신 `let`과 `const`를 쓰자 .. ! !
